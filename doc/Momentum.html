<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Momentum
  
    &mdash; Documentation by YARD 0.8.2.1
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (M)</a> &raquo;
    
    
    <span class="title">Momentum</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Momentum
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Momentum</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/business/momentum.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Class algorithm developed by Momentum. Performs calculations influences,
velocity and acceleration
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>
Natalia Garcia Menendez
</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Version:</p>
<ul class="version">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>
1.0
</p>
</div>
      
    </li>
  
</ul>

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#calculate_influences-instance_method" title="#calculate_influences (instance method)">- (Object) <strong>calculate_influences</strong>(users_mentions, date_tweet) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Method developed by the algorithm.
</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="calculate_influences-instance_method">
  
    - (<tt>Object</tt>) <strong>calculate_influences</strong>(users_mentions, date_tweet) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Method developed by the algorithm
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>users_mentions</span>
      
      
        <span class='type'>(<tt>Array</tt>, <tt><span class='object_link'><a href="User.html" title="User (class)">User</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Users for which is calculated influence
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>date_tweet</span>
      
      
        <span class='type'>(<tt>string</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Menssage date
</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/business/momentum.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_calculate_influences'>calculate_influences</span> <span class='id identifier rubyid_users_mentions'>users_mentions</span><span class='comma'>,</span> <span class='id identifier rubyid_date_tweet'>date_tweet</span>

	<span class='comment'># Extract data from de date
</span>	<span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_date_tweet'>date_tweet</span><span class='lbracket'>[</span><span class='int'>26</span><span class='comma'>,</span><span class='int'>4</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='id identifier rubyid_date_tweet'>date_tweet</span><span class='lbracket'>[</span><span class='int'>4</span><span class='comma'>,</span><span class='int'>3</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_d'>d</span> <span class='op'>=</span> <span class='id identifier rubyid_date_tweet'>date_tweet</span><span class='lbracket'>[</span><span class='int'>8</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='id identifier rubyid_date_tweet'>date_tweet</span><span class='lbracket'>[</span><span class='int'>11</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span> 
	<span class='id identifier rubyid_mn'>mn</span> <span class='op'>=</span> <span class='id identifier rubyid_date_tweet'>date_tweet</span><span class='lbracket'>[</span><span class='int'>14</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_date_tweet'>date_tweet</span><span class='lbracket'>[</span><span class='int'>17</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_z'>z</span> <span class='op'>=</span> <span class='id identifier rubyid_date_tweet'>date_tweet</span><span class='lbracket'>[</span><span class='int'>20</span><span class='comma'>,</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_date_tweet'>date_tweet</span><span class='lbracket'>[</span><span class='int'>23</span><span class='comma'>,</span><span class='int'>2</span><span class='rbracket'>]</span>

	<span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_d'>d</span><span class='op'>=</span> <span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_h'>h</span><span class='op'>=</span> <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_mn'>mn</span><span class='op'>=</span> <span class='id identifier rubyid_mn'>mn</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_s'>s</span><span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

	<span class='comment'># We get the previous hourly report to get some variables such as the number of mentions, followers, etc. And de current time
</span>	<span class='id identifier rubyid_current_hour'>current_hour</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='comma'>,</span><span class='id identifier rubyid_m'>m</span><span class='comma'>,</span><span class='id identifier rubyid_d'>d</span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_mn'>mn</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_previous_hour'>previous_hour</span> <span class='op'>=</span> <span class='id identifier rubyid_current_hour'>current_hour</span> <span class='op'>-</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_hour'>hour</span>
	
	<span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='const'>Period</span><span class='period'>.</span><span class='id identifier rubyid_find_previous'>find_previous</span><span class='lparen'>(</span><span class='id identifier rubyid_previous_hour'>previous_hour</span><span class='rparen'>)</span>

	<span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>==</span> <span class='kw'>nil</span>
		<span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='const'>Period</span><span class='period'>.</span><span class='id identifier rubyid_find_another_previous'>find_another_previous</span><span class='lparen'>(</span><span class='id identifier rubyid_previous_hour'>previous_hour</span><span class='rparen'>)</span>
	<span class='kw'>end</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>!=</span> <span class='kw'>nil</span>

		<span class='id identifier rubyid_previous_period_report'>previous_period_report</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
		<span class='comment'># Now with the information calculated in the previous period some of the data necessary for the algorithm
</span>		<span class='comment'># Number of mentions
</span>		<span class='id identifier rubyid_mentions_per_hour'>mentions_per_hour</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_period_report'>previous_period_report</span><span class='period'>.</span><span class='id identifier rubyid_total_mentions'>total_mentions</span>
		<span class='comment'># Number of users
</span>		<span class='id identifier rubyid_users_per_hour'>users_per_hour</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_period_report'>previous_period_report</span><span class='period'>.</span><span class='id identifier rubyid_total_users'>total_users</span>
		<span class='comment'># The average number of mentions for a user
</span>		<span class='id identifier rubyid_average_mentions_per_hour'>average_mentions_per_hour</span> <span class='op'>=</span> <span class='id identifier rubyid_mentions_per_hour'>mentions_per_hour</span> <span class='op'>/</span> <span class='id identifier rubyid_users_per_hour'>users_per_hour</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
		<span class='comment'># The average number of subscribers for a user 
</span>		<span class='id identifier rubyid_average_subscribers'>average_subscribers</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_period_report'>previous_period_report</span><span class='period'>.</span><span class='id identifier rubyid_total_audience'>total_audience</span> <span class='op'>/</span> <span class='id identifier rubyid_previous_period_report'>previous_period_report</span><span class='period'>.</span><span class='id identifier rubyid_users_with_subscribers'>users_with_subscribers</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>

		<span class='comment'># Phi is a measure of how easy is to be replied.
</span>		<span class='comment'># If it's too easy (Phi too large because each user got a lot of mentions or had few subscribers when mentioned) you should have a lot of mentions or few followers to have any merit
</span>		<span class='comment'># If it's too hard (Phi too small because each user got few mentions or had a lot of subscribers to get the mentions) you could have merit even having less mentions or more followers
</span>		<span class='id identifier rubyid_phi'>phi</span> <span class='op'>=</span> <span class='id identifier rubyid_average_mentions_per_hour'>average_mentions_per_hour</span> <span class='op'>/</span> <span class='id identifier rubyid_average_subscribers'>average_subscribers</span>

	<span class='kw'>end</span>
	<span class='comment'># Variables to store how must we update the current period
</span>	<span class='id identifier rubyid_subscribers'>subscribers</span> <span class='op'>=</span> <span class='int'>0</span>
	<span class='id identifier rubyid_mentions'>mentions</span> <span class='op'>=</span> <span class='id identifier rubyid_users_mentions'>users_mentions</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
	<span class='id identifier rubyid_new_mentioned_users'>new_mentioned_users</span> <span class='op'>=</span> <span class='int'>0</span>
	<span class='id identifier rubyid_new_users_with_subscribers'>new_users_with_subscribers</span> <span class='op'>=</span> <span class='int'>0</span>


	<span class='id identifier rubyid_users_mentions'>users_mentions</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
		
			<span class='comment'># Check if this is the first mention that the user receives in this period
</span>			<span class='id identifier rubyid_first_mention'>first_mention</span> <span class='op'>=</span> <span class='kw'>true</span>
			<span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_last_mention_at'>last_mention_at</span> <span class='op'>!=</span> <span class='kw'>nil</span>
				<span class='id identifier rubyid_first_mention'>first_mention</span> <span class='op'>=</span>  <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_last_mention_at'>last_mention_at</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%Y %b %d %H</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_current_hour'>current_hour</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%Y %b %d %H</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
			<span class='kw'>end</span>
			
			<span class='comment'># Calculate the number of hours since the last mention of the user, if we know the time
</span>			<span class='id identifier rubyid_hours_since_last_mention'>hours_since_last_mention</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_current_hour'>current_hour</span> <span class='op'>-</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_last_mention_at'>last_mention_at</span><span class='rparen'>)</span><span class='op'>/</span><span class='float'>3600.0</span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_last_mention_at'>last_mention_at</span> <span class='op'>!=</span> <span class='kw'>nil</span>

			<span class='comment'># Increase by one the users mentioned
</span>			<span class='id identifier rubyid_new_mentioned_users'>new_mentioned_users</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_first_mention'>first_mention</span>

		<span class='comment'># If you have the number of followers the user can not calculate the influence
</span>		<span class='kw'>unless</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_subscribers'>subscribers</span> <span class='op'>==</span> <span class='kw'>nil</span>
			
			<span class='comment'># Update the variables for the current period
</span>			<span class='id identifier rubyid_subscribers'>subscribers</span> <span class='op'>+=</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_subscribers'>subscribers</span>
			<span class='id identifier rubyid_new_users_with_subscribers'>new_users_with_subscribers</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_first_mention'>first_mention</span>

			<span class='comment'># Variables needed to calculat the influence
</span>			<span class='id identifier rubyid_user_subscribers'>user_subscribers</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_subscribers'>subscribers</span>		 
			<span class='id identifier rubyid_previous_influence'>previous_influence</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_previous_influence'>previous_influence</span>
			<span class='id identifier rubyid_acceleration'>acceleration</span> <span class='op'>=</span> <span class='int'>0</span>
			<span class='id identifier rubyid_velocity'>velocity</span> <span class='op'>=</span> <span class='int'>0</span>

			<span class='comment'># Seek influence user's previous
</span>			<span class='kw'>if</span> <span class='id identifier rubyid_previous_influence'>previous_influence</span> <span class='op'>!=</span> <span class='kw'>nil</span>
				<span class='id identifier rubyid_acceleration'>acceleration</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_influence'>previous_influence</span><span class='period'>.</span><span class='id identifier rubyid_acceleration'>acceleration</span>
				<span class='id identifier rubyid_velocity'>velocity</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_influence'>previous_influence</span><span class='period'>.</span><span class='id identifier rubyid_velocity'>velocity</span>
			<span class='kw'>end</span>

			<span class='comment'># Calculate the influence if there previous period when the last mention, and hours since the last mention and the number of followers are not 0
</span>			<span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='kw'>and</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_last_mention_at'>last_mention_at</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='kw'>and</span> <span class='id identifier rubyid_hours_since_last_mention'>hours_since_last_mention</span> <span class='op'>!=</span> <span class='float'>0.0</span> <span class='kw'>and</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_subscribers'>subscribers</span> <span class='op'>&gt;</span> <span class='int'>0</span>
				<span class='id identifier rubyid_acceleration'>acceleration</span> <span class='op'>+=</span> <span class='int'>1</span><span class='op'>/</span><span class='lparen'>(</span><span class='id identifier rubyid_user_subscribers'>user_subscribers</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='id identifier rubyid_hours_since_last_mention'>hours_since_last_mention</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='id identifier rubyid_phi'>phi</span>
				<span class='id identifier rubyid_velocity'>velocity</span> <span class='op'>+=</span> <span class='id identifier rubyid_acceleration'>acceleration</span> <span class='op'>*</span> <span class='id identifier rubyid_hours_since_last_mention'>hours_since_last_mention</span>
				
				<span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='const'>Influence</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:acceleration</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_acceleration'>acceleration</span><span class='comma'>,</span> <span class='symbol'>:audience</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_subscribers'>subscribers</span><span class='comma'>,</span> <span class='symbol'>:date</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_current_hour'>current_hour</span><span class='comma'>,</span> <span class='symbol'>:velocity</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_velocity'>velocity</span><span class='comma'>,</span> <span class='symbol'>:user_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
				<span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
				<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>calculate influence</span><span class='tstring_end'>&quot;</span></span>
			<span class='kw'>end</span>
		<span class='kw'>end</span>

		<span class='comment'># Updates the hour of the last mention of the user with the current time
</span>		<span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_last_mention_at'>last_mention_at</span> <span class='op'>=</span> <span class='id identifier rubyid_current_hour'>current_hour</span>
		<span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>

	<span class='kw'>end</span>


	<span class='comment'># Update or create the current period
</span>	<span class='id identifier rubyid_current_period_report'>current_period_report</span> <span class='op'>=</span> <span class='const'>Period</span><span class='period'>.</span><span class='id identifier rubyid_find_previous'>find_previous</span><span class='lparen'>(</span><span class='id identifier rubyid_current_hour'>current_hour</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

	<span class='kw'>if</span> <span class='id identifier rubyid_current_period_report'>current_period_report</span> <span class='op'>==</span> <span class='kw'>nil</span>
		<span class='id identifier rubyid_current_period_report'>current_period_report</span> <span class='op'>=</span> <span class='const'>Period</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:start_time</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='comma'>,</span><span class='id identifier rubyid_m'>m</span><span class='comma'>,</span><span class='id identifier rubyid_d'>d</span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='int'>00</span><span class='comma'>,</span> <span class='int'>00</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:end_time</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='comma'>,</span><span class='id identifier rubyid_m'>m</span><span class='comma'>,</span><span class='id identifier rubyid_d'>d</span><span class='comma'>,</span> <span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='int'>59</span><span class='comma'>,</span> <span class='int'>59</span><span class='comma'>,</span> <span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_current_period_report'>current_period_report</span><span class='period'>.</span><span class='id identifier rubyid_total_mentions'>total_mentions</span> <span class='op'>=</span> <span class='id identifier rubyid_mentions'>mentions</span>
		<span class='id identifier rubyid_current_period_report'>current_period_report</span><span class='period'>.</span><span class='id identifier rubyid_total_audience'>total_audience</span> <span class='op'>=</span> <span class='id identifier rubyid_subscribers'>subscribers</span>
		<span class='id identifier rubyid_current_period_report'>current_period_report</span><span class='period'>.</span><span class='id identifier rubyid_total_users'>total_users</span> <span class='op'>=</span> <span class='id identifier rubyid_new_mentioned_users'>new_mentioned_users</span>
		<span class='id identifier rubyid_current_period_report'>current_period_report</span><span class='period'>.</span><span class='id identifier rubyid_users_with_subscribers'>users_with_subscribers</span> <span class='op'>=</span> <span class='id identifier rubyid_new_users_with_subscribers'>new_users_with_subscribers</span>
	<span class='kw'>else</span>
		<span class='id identifier rubyid_current_period_report'>current_period_report</span><span class='period'>.</span><span class='id identifier rubyid_total_mentions'>total_mentions</span> <span class='op'>+=</span> <span class='id identifier rubyid_mentions'>mentions</span>
		<span class='id identifier rubyid_current_period_report'>current_period_report</span><span class='period'>.</span><span class='id identifier rubyid_total_audience'>total_audience</span> <span class='op'>+=</span> <span class='id identifier rubyid_subscribers'>subscribers</span>
		<span class='id identifier rubyid_current_period_report'>current_period_report</span><span class='period'>.</span><span class='id identifier rubyid_total_users'>total_users</span> <span class='op'>+=</span> <span class='id identifier rubyid_new_mentioned_users'>new_mentioned_users</span>
		<span class='id identifier rubyid_current_period_report'>current_period_report</span><span class='period'>.</span><span class='id identifier rubyid_users_with_subscribers'>users_with_subscribers</span> <span class='op'>+=</span> <span class='id identifier rubyid_new_users_with_subscribers'>new_users_with_subscribers</span>
	<span class='kw'>end</span>
	<span class='id identifier rubyid_current_period_report'>current_period_report</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>

<span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ex'>ex</span>
	<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Momentum: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ex'>ex</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Aug 22 13:20:22 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.2.1 (ruby-1.9.2).
</div>

  </body>
</html>